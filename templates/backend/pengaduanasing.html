{% extends "backend/base_ui.html" %} {% load static %} {% load custom_filters %}
{% block konten %}
<div class="pagetitle">
  <h1>Data Pengaduan Asing</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
      <li class="breadcrumb-item">Aduan Asing</li>
    </ol>
  </nav>
</div>

<section class="section">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <!-- Tombol ke halaman arsip -->
          <div class="d-flex justify-content-end mt-3">
            <a
              href="{% url 'daftar_arsip_pengaduan_asing' %}"
              class="btn btn-outline-secondary btn-sm"
            >
              üìÅ Lihat Arsip Pengaduan
            </a>
          </div>

          <!-- Table -->
          <div class="table-responsive mt-3">
            <table class="table datatable">
              <thead>
                <tr>
                  <th>Nama</th>
                  <th>Email</th>
                  <th>Telepon</th>
                  <th>Ktp</th>
                  <th>Tanggal</th>
                  <th class="text-center">Aksi</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <!-- End Table -->
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  function refreshPengaduan() {
    fetch("{% url 'pengaduan_partial' %}")
      .then((response) => response.text())
      .then((html) => {
        document.querySelector("tbody").innerHTML = html;
      });
  }

  // Refresh setiap 5 detik (bisa diubah jadi 1000 ms = 1 detik)
  setInterval(refreshPengaduan, 1000);
</script>
<script>
  function openPopup(url) {
    window.open(url, "_blank", "width=600,height=400");
  }
</script>
{% endblock konten %}
